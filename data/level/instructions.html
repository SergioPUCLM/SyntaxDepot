<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syntax Depot - Level Creation Guide</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        code, pre {
            background-color: #f5f5f5;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: Consolas, monospace;
        }
        pre {
            padding: 10px;
            overflow-x: auto;
        }
        ul {
            padding-left: 20px;
        }
        .note {
            background-color: #e7f4ff;
            padding: 10px;
            border-left: 4px solid #3498db;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h1>Level Creation Guide for Syntax Depot</h1>

    <h2>General Considerations</h2>

    <h3>Level Directory and Naming Convention</h3>
    <p>Each level is stored as a separate directory within <code>./SyntaxDepot/data/level/</code>. The directory name determines both the title of the level and its place in the game's progression system. Level folders must follow this naming format:</p>
    
    <p><code>X_levelname</code></p>
    
    <p>Where:</p>
    <ul>
        <li><code>X</code> is a non-negative integer representing the level's progression index</li>
        <li><code>levelname</code> is a human-readable title</li>
    </ul>
    
    <div class="note">
        <strong>Progression rules:</strong>
        <ul>
            <li>A player can access level <code>X</code> only after completing at least one level numbered <code>X-1</code></li>
            <li>Level <code>1</code> is always unlocked at the start (level <code>0</code> is marked as completed initially)</li>
            <li>Multiple levels may share the same number, completing any of them unlocks all levels with the next number (<code>X+1</code>)</li>
            <li>Level <code>0</code> is special, completing it doesn't unlock level <code>2</code> or higher (best used for optional tutorials)</li>
        </ul>
    </div>
    
    <p>When multiple levels share the same number, they're displayed alphabetically by name in the level selection screen.</p>

    <h3>Files Within a Level Directory</h3>
    <p>Each level directory contains these files:</p>
    
    <p><strong>Required:</strong></p>
    <ul>
        <li><code>bg.png</code>: The level's background image (visual layout only)</li>
        <li><code>structure.json</code>: Defines the level's physical structure and entity placement</li>
    </ul>
    
    <p><strong>Optional:</strong></p>
    <ul>
        <li><code>dialogue.json</code>: Contains messages displayed by A.R.I.A. at level start or when Help is pressed</li>
    </ul>
    
    <p><strong>Autogenerated (can be safely deleted when game isn't running):</strong></p>
    <ul>
        <li><code>script/</code>: Contains player's saved robot scripts</li>
        <li><code>leaderboard.json</code>: Stores player scores</li>
    </ul>

    <h2>Creating the Background</h2>
    <p>Each level's visual appearance is defined by <code>bg.png</code> in the level's folder. This is purely visual and doesn't affect gameplay.</p>

    <h3>Image Sizing and Structure</h3>
    <p>For best results, create your background image with these exact dimensions:</p>
    <pre>width × 64 by height × 64</pre>
    <p>Where <code>width</code> and <code>height</code> represent the number of tiles horizontally and vertically in your level.</p>

    <h3>Using Tilesets</h3>
    <p>For easier background creation:</p>
    <ul>
        <li>A default tileset is provided at <code>./SyntaxDepot/res/sprites/SD-Tileset.png</code></li>
        <li>Recommended to use square tiles with dimensions that are powers of two (16x16, 32x32, 64x64)</li>
        <li>Using 64x64 pixels per tile ensures full compatibility</li>
    </ul>
    
    <p>For the easiest workflow, we recommend using the <a href="https://www.mapeditor.org/download.html" target="_blank">Tiled</a> tilemap editor.</p>

    <h2>Defining the Level Structure</h2>
    <p>The <code>structure.json</code> file contains three primary keys:</p>
    
    <pre>{
  "size": [width, height],
  "matrix": [/* 2D array representing terrain */],
  "entities": {
    "tile": [/* entities attached to tiles */],
    "ground": [/* floor entities */],
    "air": [/* floating entities */]
  }
}</pre>

    <h3>The Matrix Key</h3>
    <p>Defines physical terrain using these integer values:</p>
    <ul>
        <li><code>0</code>: Empty tile (walkable by ground entities)</li>
        <li><code>1</code>: Obstacle (blocks ground entities but allows air entities)</li>
        <li><code>2</code>: Wall (completely impassable to all entities)</li>
    </ul>

    <h3>The Entities Key</h3>
    <p>Contains three vertical layers:</p>
    <ol>
        <li><code>tile</code>: Entities attached to tiles (traps, crate generators, etc.)</li>
        <li><code>ground</code>: Floor entities (robots, terminals, etc.)</li>
        <li><code>air</code>: Floating/moving entities</li>
    </ol>
    
    <p>Each entity requires at least:</p>
    <pre>{
  "type": "EntityType",
  "x": x_coordinate,
  "y": y_coordinate
}</pre>
    
    <p>Additional properties may be needed depending on entity type.</p>

    <h3>Example Level Structure</h3>
    <pre>{
  "size": [11, 11],
  "matrix": [
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
    [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
    [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
    [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
    [2, 0, 0, 0, 2, 2, 2, 0, 0, 0, 2],
    [2, 1, 1, 1, 2, 2, 2, 1, 1, 1, 2],
    [2, 0, 0, 0, 2, 2, 2, 0, 0, 0, 2],
    [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
    [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
    [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
  ],
  "entities": {
    "tile": [
      { "type": "CrateGen", "x": 9, "y": 7, "crate_count": 2, "crate_type": "small" },
      { "type": "CrateGen", "x": 9, "y": 9, "crate_count": 2, "crate_type": "big"},
      { "type": "CrateDel", "x": 1, "y": 8 },
      { "type": "ChargePad", "x": 5, "y": 3 },
      { "type": "ChargePad", "x": 5, "y": 7 },
      { "type": "Trap", "x": 5, "y": 1 },
      { "type": "Trap", "x": 5, "y": 9 }
    ],
    "ground": [
      { "type": "Blue", "x": 5, "y": 2, "direction": "N" },
      { "type": "Red", "x": 5, "y": 8, "direction": "S" },
      { "type": "InputTer", "x": 1, "y": 2, "ter_one": "#42e6f5", "ter_two": "#e0f542", "operation": "+"},
      { "type": "OutputTer", "x": 9, "y": 3, "color": "#42e6f5"},
      { "type": "OutputTer", "x": 9, "y": 1, "color": "#e0f542"},
      { "type": "Crate", "x": 8, "y": 3, "small": true },
      { "type": "Crate", "x": 8, "y": 7, "small": false },
      { "type": "Collectable", "x": 3, "y": 4 },
      { "type": "Collectable", "x": 7, "y": 4 },
      { "type": "Collectable", "x": 3, "y": 6 },
      { "type": "Collectable", "x": 7, "y": 6 }
    ],
    "air": [
      { "type": "Green", "x": 8, "y": 5, "direction": "W" },
      { "type": "Collectable", "x": 8, "y": 6 }
    ]
  }
}</pre>

    <h3>Validation Rules</h3>
    <p>Your level must meet these requirements to load correctly:</p>
    <ul>
        <li>At least one robot must be present</li>
        <li>Only one instance of each robot type is allowed</li>
        <li>If crates or crate generators are included:
            <ul>
                <li>A robot capable of carrying crates must be present</li>
                <li>A crate deletor must also be present</li>
            </ul>
        </li>
        <li>If large crates are used, the Red robot must be present</li>
        <li>At least one ground robot (Red or Blue) exists per ChargePad</li>
        <li>If any terminals exist, the Blue robot must be present</li>
        <li>Each InputTer must have two corresponding OutputTer entries</li>
        <li>Allowed terminal operations: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code></li>
        <li>All entities must be placed within valid coordinates and appropriate layers</li>
    </ul>

    <h2>Adding Dialogue</h2>
    <p>Optional dialogue is stored in <code>dialogue.json</code> with this structure:</p>
    
    <pre>{
  "messages": [
    "Message 1",
    "Message 2",
    "Message 3"
  ]
}</pre>
    
    <div class="note">
        <strong>Recommendations:</strong>
        <ul>
            <li>Keep messages concise and focused</li>
            <li>Split long explanations into multiple messages</li>
            <li>Consider readability and pacing</li>
            <li>Structure messages for easy skimming</li>
        </ul>
    </div>

    <h3>Example Dialogue</h3>
    <pre>{
  "messages": [
    "Another day, another bot to babysit. This time, it's Green. Why Green? Well, you're not gonna believe this, but it's because it's green. Shocking, I know.",
    "Miss Red already? I know, I know, that little ground-crawler grows on you. Except that he's not little at all.",
    "But now it's Green's time to shine. Or more accurately, to hover ominously.",
    "Unlike Red, Green isn't limited by the tyranny of the floor. If it's not a wall, it can probably float over it.",
    "Pits, crates, shelves, pipes, sleeping bots... none of that slows Green down.",
    "What does slow Green down, you ask? Well, nothing really. Except maybe your coding skills. Oh yeah, and weight. Turns out flying requires a lighter bot."
  ]
}</pre>
</body>
</html>